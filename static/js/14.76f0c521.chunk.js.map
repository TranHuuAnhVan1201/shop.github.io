{"version":3,"sources":["app/components/register/login/Login.js"],"names":["Login","props","api","axios","create","baseURL","loginUser","useHistory","a","post","inputs","then","res","token","data","access","jwtDecode","role","history","push","localStorage","setItem","catch","err","console","log","useState","username","password","setInputs","submitted","setSubmitted","handleChange","event","target","name","value","className","id","onSubmit","preventDefault","htmlFor","onChange","type","placeholder","to"],"mappings":"gOA8EeA,UAzEf,SAAeC,GACX,IAAMC,EAAMC,IAAMC,OAAO,CACrBC,QAAQ,mEAGNC,GADQC,cACC,uCAAG,sBAAAC,EAAA,sEACEN,EAAIO,KAAK,IAAKC,GACzBC,MAAK,SAAAC,GACF,IAAMC,EAAQD,EAAIE,KAAKC,OAEL,UADJC,YAAUH,GACfI,KAAoBhB,EAAMiB,QAAQC,KAAK,eAAiBlB,EAAMiB,QAAQC,KAAK,UACpFC,aAAaC,QAAQ,QAASR,MAEjCS,OAAM,SAAAC,GACHC,QAAQC,IAAIF,MATN,yDAAH,sDALG,EAwBUG,mBAAS,CACjCC,SAAU,GACVC,SAAU,KA1BI,mBAwBXlB,EAxBW,KAwBHmB,EAxBG,OA4BgBH,oBAAS,GA5BzB,mBA4BXI,EA5BW,KA4BAC,EA5BA,KA6BVJ,EAAuBjB,EAAvBiB,SAAUC,EAAalB,EAAbkB,SAClB,SAASI,EAAaC,GAAO,IAAD,EACAA,EAAMC,OAAtBC,EADgB,EAChBA,KAAMC,EADU,EACVA,MACdP,GAAU,SAAAnB,GAAM,kCAAUA,GAAV,kBAAmByB,EAAOC,OAc9C,OACI,sBAAKC,UAAU,YAAf,UACI,uBAAMC,GAAG,aAAaD,UAAU,OAAOE,SAd/C,SAAsBN,GAClBA,EAAMO,iBACNT,GAAa,GACTJ,GAAYC,IACZC,EAAUnB,GACVc,QAAQC,IAAIf,GACZJ,MAQA,UACI,+CACA,sBAAK+B,UAAW,gBAAmBP,IAAcH,EAAY,SAAW,KAAxE,UACI,uBAAOc,QAAQ,WAAf,sBACA,uBAAON,KAAK,WAAWC,MAAOT,EAAUe,SAAUV,EAAcW,KAAK,OAAOL,GAAG,iBAAiBM,YAAY,mBAC5G,wDAEJ,sBAAKP,UAAW,gBAAmBP,IAAcF,EAAY,SAAW,KAAxE,UACI,uBAAOa,QAAQ,WAAf,sBACA,uBAAON,KAAK,WAAWC,MAAOR,EAAUc,SAAUV,EAAcW,KAAK,WAAWL,GAAG,iBAAiBM,YAAY,mBAChH,wDAEJ,wBAAQD,KAAK,SAAb,uBAGJ,sBAAKN,UAAU,QAAf,UACI,cAAC,IAAD,CAAMQ,GAAG,IAAIR,UAAU,WAAvB,kBACA,cAAC,IAAD,CAAMQ,GAAG,YAAYR,UAAU,WAA/B,8B","file":"static/js/14.76f0c521.chunk.js","sourcesContent":["import axios from 'axios';\r\nimport jwtDecode from 'jwt-decode';\r\nimport React, { useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport './../css/register.css';\r\nfunction Login(props) {\r\n    const api = axios.create({\r\n        baseURL: `http://phucnb-django-example.herokuapp.com/api/user/auth/login`\r\n    });\r\n    let history = useHistory();\r\n    const loginUser = async () => {\r\n        let res = await api.post('/', inputs)\r\n            .then(res => {\r\n                const token = res.data.access;\r\n                let decoded = jwtDecode(token);\r\n                (decoded.role === 'admin') ? props.history.push('/admin/user') : props.history.push('/carts');\r\n                localStorage.setItem(\"token\", token);   \r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n        \r\n    };\r\n    // Bước 1: khai báo State - gồm 2 phần tử input và setInput.\r\n    // Bước 2: khai báo inputs = {} object.\r\n    // Bước 3: function handleChange(e), nhận 2 trường name, value;\r\n    // Bước 4: onChange - khi input thay đổi thì gọi handleChange()\r\n    // Bước 5: setInputs(giá trị input => ({...inputs, [name]: value))\r\n    // Bước 6: Khi nhấn Submit => \r\n    const [inputs, setInputs] = useState({\r\n        username: \"\",\r\n        password: \"\"\r\n    });\r\n    const [submitted, setSubmitted] = useState(false);\r\n    const { username, password } = inputs;\r\n    function handleChange(event){\r\n        const { name, value } = event.target;\r\n        setInputs(inputs => ({ ...inputs, [name]: value }));\r\n    }\r\n    function handleSubmit(event) {\r\n        event.preventDefault();\r\n        setSubmitted(true);\r\n        if (username && password) {\r\n            setInputs(inputs);\r\n            console.log(inputs);\r\n            loginUser();\r\n            \r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <form id=\"form-login\" className=\"form\" onSubmit={handleSubmit}>\r\n                <h2>Login With Us</h2>\r\n                <div className={'form-control' + ((submitted && !username) ? ' error' : ' ')}>\r\n                    <label htmlFor=\"username\">Username</label>\r\n                    <input name=\"username\" value={username} onChange={handleChange} type=\"text\" id=\"username-login\" placeholder=\"Enter username\" />\r\n                    <small>Error username !</small>\r\n                </div>\r\n                <div className={\"form-control\" + ((submitted && !password) ? ' error' : ' ')}>\r\n                    <label htmlFor=\"password\">Password</label>\r\n                    <input name=\"password\" value={password} onChange={handleChange} type=\"password\" id=\"password-login\" placeholder=\"Enter password\" />\r\n                    <small>Error password !</small>\r\n                </div>\r\n                <button type=\"submit\">Submit</button>\r\n               \r\n            </form>\r\n            <div className=\"group\">\r\n                <Link to=\"/\" className=\"btn-link\">Back</Link>\r\n                <Link to=\"/register\" className=\"btn-link\">Register</Link>\r\n                \r\n            </div>\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default Login;"],"sourceRoot":""}